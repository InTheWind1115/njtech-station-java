#### 1.匹配聊天功能实现思路
```
1.用户发来匹配的请求
2.把wantMatch置为true，标志用户想要进行聊天
3.我要考虑他是否是第一个人，如果是的话，匹配失败，让他继续匹配。
4.如果不是第一人的话，对map进行遍历，找到另外一个想匹配的人。
5.然后将两个用户的messageTo置为对方的手机号，这样好在map集合中找到对方。
6.将isFree置为false，标志自己在和另外一个用户正在进行匹配聊天。
```

#### 2.离开聊天功能实现思路
```
1.用户发来离开的请求
2.把自己的messageTo设置为空字符串
3.把自己的isFree设置为true
4.把自己的wantMatch设置为false
5.通知对方自己已经离开
6.接下来相应的设置对方的信息
```

#### 3. 客户端发来的json数据结构
```
格式：
    {
        type: int,
        content: string
    }

说明：
    type = -1, 用户想要离开聊天
    type = 0, 用户想要进行匹配聊天
    type = 1, 用户想要发送消息，发送的消息在content中
```

#### 4.服务器向客户端发送的json数据结构
```
格式：
    {
        type: int,
        content: string
    }

说明：
    type = -4, 系统消息， 没有登录
    type = -3, 系统消息， 匹配失败，没有进行学校邮箱验证
    type = -2, 系统消息， 正在匹配中
    type = -1, 系统消息，对方已经离开
    type = 0, 系统消息， 匹配成功
    type = 1, 对方发来的消息，发来的消息在content中
```
#### 5.向学校邮箱发送验证码后端实现
```
1.首先前端post方法传过来一个email
2.判断后缀是否为@njtech.edu.cn,不是的话注册失败
3.若是学校邮箱，查询数据库中是否有此邮箱，有的话返回提示，已被注册，请联系管理员。
4.上一步对数据库开销较大，是否可以使用redis实现？
5.产生6位验证码，然后session.setAttribute("emailCode", "验证码")，5分钟失效。
6.创建一个EmailService对象，向此邮箱发送验证码。
格式：
    {
        type: int,
        content: string
    }

说明：
    未知错误：type = -2 content = "未知错误，请刷新后再次尝试。"
    非学校邮箱：type = -1 content = "只支持南京工业大学邮箱验证。"
    邮箱已被注册：type = 0  content = "邮箱已被注册，若不是您的操作，请与管理员联系"
    验证码发送成功： type = 1 content = "验证码发送成功，请到学校邮箱中查看。"
```
#### 6.验证邮箱验证码功能实现
```
1.拿来request中的验证码
2.和session的attribute对比
3.若拿不到attribute，说明验证码已经失效，返回验证码已失效提示。
4.和attribute中的验证码对比，若！equals，返回验证码错误。
5.注册成功，写入数据库，返回提示

格式：
    {
        type: int,
        content: string
    }

说明：
    未知错误：type = -2 content = "未知错误，请刷新后再次尝试。"
    验证码失效：type = -1 content = "验证码失效，请重新获取验证码"
    验证码错误：type = 0  content = "验证码错误，请输入正确的验证码"
    注册成功：  type = 1 content = "学校邮箱验证成功"
```